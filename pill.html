<!DOCTYPE html>
<html>
<head>
    <style>
        html, body {
            margin: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0);
        }
        #pill {
            width: 100%; height: 100%;
            border-radius: 25px;             /* pill shape, was 50px */
            background: #007aff;
            -webkit-app-region: drag;        /* make entire area draggable */
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            /* No change to width/height here, as it matches window size */
        }
        #pill * { -webkit-app-region: no-drag } /* allow clicks */
        #open {
            font-size: 1em; /* scale down button icon */
            width: 28px;
            height: 28px;
            border-radius: 14px;
        }

        /* Animation for recording state - only changing background color */
        @keyframes colorPulse {
            0% { background-color: #007aff; }
            50% { background-color: #ff3b30; }
            100% { background-color: #007aff; }
        }

        .recording {
            animation: colorPulse 1.5s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div id="pill">
        <button id="open">⚙️</button>
    </div>
    <script>
        document.getElementById('open').addEventListener('click', () => {
            window.electronAPI.openMain()
        })

        // Register for recording status updates
        window.electronAPI.onRecordingStatusChange((isRecording) => {
            const pill = document.getElementById('pill');
            if (isRecording) {
                pill.classList.add('recording');
            } else {
                pill.classList.remove('recording');
            }
        });

        // Listen for API key status from main process
        if (window.electronAPI && window.electronAPI.onApiKeyStatus) {
            window.electronAPI.onApiKeyStatus((configured) => {
                if (!configured) {
                    // Show a simple modal or alert for now
                    alert('API key not configured. Please open settings and enter your OpenAI API key.');
                }
            });
        } else if (window.require) {
            // Fallback for direct IPC
            const { ipcRenderer } = require('electron');
            ipcRenderer.on('api-key-status', (event, configured) => {
                if (!configured) {
                    alert('API key not configured. Please open settings and enter your OpenAI API key.');
                }
            });
        }
    </script>
</body>
</html> 